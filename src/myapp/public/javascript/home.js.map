{"version":3,"sources":["home.js"],"names":["$","home","init","insertArticles","results","str","i","length","articleId","bannerUrl","title","authorName","category","created","content","append","bindEvent","window","on","scrollTopHeightAfter","parseFloat","scrollTop","browserHeight","height","document","Date","last","find","text","getTime","ajax","type","url","async","success","msg","JSON","parse","jQuery"],"mappings":"CAAA,SAAUA,GAEN,GAAIC,OAEAC,KAAM,aAINC,eAAgB,SAASC,SAErB,IAAK,GADDC,KAAM,GACDC,EAAI,EAAGA,EAAIF,QAAQG,OAAQD,IAChCD,KAAO,oDAAsDD,QAAQE,GAAGE,UAAY,yGAG5BJ,QAAQE,GAAGE,UAAY,eACxCJ,QAAQE,GAAGG,UAAY,gFAKFL,QAAQE,GAAGE,UAAY,mBAAqBJ,QAAQE,GAAGI,MAAQ,6GAIpEN,QAAQE,GAAGK,WAAa,6EAE3BP,QAAQE,GAAGM,SAAW,iEAEvCR,QAAQE,GAAGO,QAAU,qCAGxBT,QAAQE,GAAGQ,QAAU,0EAGOV,QAAQE,GAAGE,UAAY,wCAMvFR,GAAE,aAAae,OAAOV,MAG1BW,UAAW,WAEPhB,EAAEiB,QAAQC,GAAG,SAAU,WACnB,GAAIC,sBAAuBC,WAAWpB,EAAEiB,QAAQI,aAC5CC,cAAeF,WAAWpB,EAAEiB,QAAQM,SAExC,IADqBH,WAAWpB,EAAEwB,UAAUD,UACvBD,cAAgBH,sBAAwB,IAAK,CAE9D,GAAIN,SAAU,GAAKY,MAAKzB,EAAE,WAAW0B,OAAOC,KAAK,QAAQC,QAASC,UAAY,GAE9E7B,GAAE8B,MACEC,KAAM,MACNC,IAAK,4BAA8BnB,QACnCoB,OAAO,EACPC,QAAS,SAASC,KACd,GAAY,SAARA,IACA,OAAO,CAEXlC,MAAKE,eAAeiC,KAAKC,MAAMF,aAkEvDlC,MAAKC,OACLD,KAAKe,aACNsB","file":"home.js","sourcesContent":["(function($) {\n\n    var home = {\n\n        init: function() {\n\n        },\n\n        insertArticles: function(results) {\n            var str = '';\n            for (var i = 0; i < results.length; i++) {\n                str += '<article class=\"normal-article\" data-article-id=\"' + results[i].articleId + '\">' +\n                            '<div class=\"normal-article-wrap clearfix\">' +\n                                '<div class=\"normal-banner\">' +\n                                    '<a href=\"/getArticle?articleId=' + results[i].articleId + '\">' +\n                                        '<img src=\"' + results[i].bannerUrl + '\">' +\n                                    '</a>' +\n                                '</div>' +\n                                '<div class=\"normal-text-wrap\">' +\n                                    '<h1>' +\n                                        '<a href=\"/getArticle?articleId=' + results[i].articleId + '\" class=\"title\">' + results[i].title + '</a>' +\n                                    '</h1>' +\n                                    '<div class=\"article-meta\">' +\n                                        '<i class=\"fa fa-user\" aria-hidden=\"true\"></i>' +\n                                        '<span class=\"author-name\">' + results[i].authorName + '</span>' +\n                                        '<i class=\"fa fa-tag\" aria-hidden=\"true\"></i>' +\n                                        '<span class=\"category\">' + results[i].category + '</span>' +\n                                        '<i class=\"fa fa-calendar\" aria-hidden=\"true\"></i>' +\n                                        '<time>' + results[i].created + '</time>' +\n                                    '</div>' +\n                                    '<div class=\"text\">' +\n                                        '<p>' + results[i].content + '</p>' +\n                                    '</div>' +\n                                    '<div class=\"continue-reading\">' +\n                                        '<a href=\"/getArticle?articleId=' + results[i].articleId + '\">继续阅读</a>' +\n                                    '</div>' +\n                                '</div>' +\n                            '</div>' +\n                        '</article>';\n            }\n            $('.articles').append(str);\n        },\n\n        bindEvent: function() {\n            // 滚动加载\n            $(window).on('scroll', function() {\n                var scrollTopHeightAfter = parseFloat($(window).scrollTop());\n                var browserHeight= parseFloat($(window).height());\n                var documentHeight = parseFloat($(document).height());\n                if (documentHeight - browserHeight - scrollTopHeightAfter <= 300) {\n\n                    var created = (new Date($('article').last().find('time').text())).getTime() / 1000;\n\n                    $.ajax({\n                        type: 'get',\n                        url: '/getMoreArticles?created=' + created,\n                        async: false,\n                        success: function(msg){\n                            if (msg === 'null') {\n                                return false;\n                            }\n                            home.insertArticles(JSON.parse(msg));\n                        }\n                    });\n\n                }\n\n            });\n        }\n\n    };\n\n    // function insertArticles(results) {\n    //     var str = '';\n    //     for (var i = 0; i < results.length; i++) {\n    //         str += '<article class=\"normal-article\" data-article-id=' + results[i].id + '>' +\n    //                     '<div class=\"normal-article-wrap clearfix\">' +\n    //                         '<div class=\"normal-banner\">' +\n    //                             '<a href=\"/getArticle?articleId=\"' + results[i].id + '>' +\n    //                                 '<img src=' + results[i].bannerUrl + '>' +\n    //                             '</a>' +\n    //                         '</div>' +\n    //                         '<div class=\"normal-text-wrap\">' +\n    //                             '<h1>' +\n    //                                 '<a href=\"/getArticle?articleId=\"' + results[i].id + 'class=\"title\">' + results[i].title + '</a>' +\n    //                             '</h1>' +\n    //                             '<div class=\"article-meta\">' +\n    //                                 '<i class=\"fa fa-user\" aria-hidden=\"true\"></i>' +\n    //                                 '<span class=\"author-name\">' + results[i].name + '</span>' +\n    //                                 '<i class=\"fa fa-tag\" aria-hidden=\"true\"></i>' +\n    //                                 '<span class=\"category\">' + results[i].category + '</span>' +\n    //                                 '<i class=\"fa fa-calendar\" aria-hidden=\"true\"></i>' +\n    //                                 '<time>' + results[i].created + '</time>' +\n    //                             '</div>' +\n    //                             '<div class=\"text\">' +\n    //                                 '<p>' + results[i].content + '</p>' +\n    //                             '</div>' +\n    //                             '<div class=\"continue-reading\">' +\n    //                                 '<a href=\"/getArticle?articleId=\"' + results[i].id + '>继续阅读</a>' +\n    //                             '</div>' +\n    //                         '</div>' +\n    //                     '</div>' +\n    //                 '</article>';\n    //     }\n    //     $('.articles').append(str);\n        \n    // }\n\n    // function bindEvent() {\n    //     $(window).scroll(function() {\n    //         var created = (new Date($('article').last().find('time').text())).getTime() / 1000;\n\n    //         console.log(created);\n            \n    //         $.ajax({\n    //             type: 'get',\n    //             url: '/getMoreArticles?created=' + created,\n    //             success: function(msg){\n    //                 console.log(msg);\n    //                 insertArticles(msg);\n\n    //             }\n    //         });\n\n    //     });\n    // }\n\n    home.init();\n    home.bindEvent();\n})(jQuery);"]}